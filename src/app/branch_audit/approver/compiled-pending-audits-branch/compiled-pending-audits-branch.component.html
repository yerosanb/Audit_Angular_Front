<main id="main" class="main">
  <p-toast></p-toast>
  <div class="pagetitle">
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a routerLink="/"><i class="bi bi-house-door"></i></a>
        </li>
        <li class="breadcrumb-item active">Pending Findings</li>
        <li></li>
      </ol>
    </nav>
  </div>
  <section class="section">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-body">
            <p-toolbar styleClass="p-mb-4">
              <ng-template pTemplate="left">
                <button
                  pButton
                  pRipple
                  label="Approve"
                  icon="pi pi-verified"
                  class="p-button-raised p-button-rounded p-button-success p-mr-2"
                  (click)="approveSelectedFindings()"
                  [disabled]="!selectedAudits || !selectedAudits.length"
                ></button>

                <button
                  pButton
                  pRipple
                  label="Draft"
                  icon="pi pi-pencil"
                  class="p-button-raised p-button-rounded p-button-secondary"
                  (click)="addToDraftingSelected()"
                  [disabled]="!selectedAudits || !selectedAudits.length"
                ></button>
              </ng-template>

              <ng-template pTemplate="right">
                <div class="flex">
                  <button
                    type="button"
                    pButton
                    pRipple
                    icon="pi pi-file"
                    (click)="dt.exportCSV()"
                    class="mr-2"
                    pTooltip="CSV"
                    tooltipPosition="bottom"
                  ></button>
                  <button
                    type="button"
                    pButton
                    pRipple
                    icon="pi pi-file-excel"
                    (click)="exportExcel()"
                    class="p-button-success mr-2"
                    pTooltip="XLS"
                    tooltipPosition="bottom"
                  ></button>
                  <!-- <button
                    type="button"
                    pButton
                    pRipple
                    icon="pi pi-file-pdf"
                    (click)="exportPdf()"
                    class="p-button-warning mr-2"
                    pTooltip="PDF"
                    tooltipPosition="bottom"
                  ></button> -->
                  <button
                    type="button"
                    pButton
                    pRipple
                    icon="pi pi-filter"
                    (click)="dt.exportCSV({ selectionOnly: true })"
                    class="p-button-info ml-auto"
                    pTooltip="Selection Only"
                    tooltipPosition="bottom"
                  ></button>
                </div>
              </ng-template>
            </p-toolbar>
            <p-table
              #dt
              [value]="compiledRegionalAudits"
              [rows]="10"
              [paginator]="true"
              [loading]="loading"
              [globalFilterFields]="[
                'id',
                'case_number',
                'finding',
                'impact',
                'recommendation',
                'compiler.first_name',
                'compiler.middle_name',
                'compiled_date',
                'audit_type'
              ]"
              [(selection)]="selectedAudits"
              [rowHover]="true"
              dataKey="id"
              currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
              [tableStyle]="{ 'min-width': '120rem' }"
              [showCurrentPageReport]="true"
            >
              <ng-template pTemplate="caption">
                <div class="p-d-flex p-ai-center p-jc-between">
                  <h5 class="p-m-0">Pending Findings</h5>
                  <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input
                      pInputText
                      #searchData
                      type="text"
                      (input)="dt.filterGlobal(searchData.value, 'contains')"
                      placeholder="Search..."
                    />
                  </span>
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width: 3rem"></th>
                  <th style="width: 3rem">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                  </th>
                  <th style="min-width: 6rem">
                    <div class="flex justify-content-center align-items-center">
                      Case Number
                      <p-columnFilter
                        type="text"
                        field="case_number"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th style="min-width: 10rem">
                    <div class="flex justify-content-center align-items-center">
                      Audit Type
                      <p-columnFilter
                        type="text"
                        field="audit_type"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>

                  <th style="min-width: 15rem">
                    <div class="flex justify-content-center align-items-center">
                      Finding
                      <p-columnFilter
                        type="text"
                        field="finding"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th style="min-width: 6rem">
                    <div class="flex justify-content-center align-items-center">
                      Impact
                      <p-columnFilter
                        type="text"
                        field="impact"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th style="min-width: 15rem">
                    <div class="flex justify-content-center align-items-center">
                      Recommendation
                      <p-columnFilter
                        type="text"
                        field="recommendation"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>

                  <th style="min-width: 10rem">
                    <div class="flex justify-content-center align-items-center">
                      Compiled By
                      <p-columnFilter
                        type="text"
                        field="compiler.first_name"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>

                  <th style="min-width: 8rem">
                    <div class="flex justify-content-center align-items-center">
                      Compiled Date
                      <p-columnFilter
                        type="date"
                        field="compiled_date"
                        display="menu"
                      ></p-columnFilter>
                    </div>
                  </th>

                  <th style="width: 10rem">Action</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-audit let-expanded="expanded">
                <tr>
                  <td>
                    <button
                      type="button"
                      pButton
                      pRipple
                      [pRowToggler]="audit"
                      (click)="getRowDetails(audit)"
                      class="p-button-text p-button-rounded p-button-plain"
                      [icon]="
                        expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'
                      "
                    ></button>
                  </td>
                  <td>
                    <p-tableCheckbox [value]="audit"></p-tableCheckbox>
                  </td>
                  <td>{{ audit.case_number }}</td>
                  <td>{{ audit.audit_type }}</td>
                  <td>
                    <span [innerHTML]="audit.finding"></span>
                  </td>
                  <td>
                    <span [innerHTML]="audit.impact"></span>
                  </td>
                  <td>
                    <span [innerHTML]="audit.recommendation"></span>
                  </td>
                  <td>
                    {{ audit.compiler.first_name }}
                    {{ audit.compiler.middle_name }}
                  </td>
                  <td>
                    {{ audit.compiled_date | date : "MM/dd/yyyy" }}
                  </td>
                  <td>
                    <button
                      pButton
                      pRipple
                      icon="pi pi-check-circle"
                      pTooltip="Approve Finding"
                      class="p-button-rounded p-button-success p-mr-2"
                      (click)="approveFinding(audit)"
                    ></button>

                    <button
                      pButton
                      pRipple
                      icon="pi pi-pencil"
                      pTooltip="Edit Finding"
                      class="p-button-rounded p-button-secondary"
                      (click)="addToDrafting(audit)"
                    ></button>
                  </td>
                </tr>
              </ng-template>


              <ng-template pTemplate="rowexpansion" let-audit>
                <tr>
                  <td colspan="12">
                    <div class="p-3">
                      <div style="padding: 0.5em 0 1em 0">
                        <p-button
                          (click)="activeIndex1 = 0"
                          icon="pi pi-plus"
                          styleClass="p-button-raised p-button-rounded p-ml-2"
                          label="Detail"
                        ></p-button>

                        <ng-container
                          *ngIf="unseen_remark > 0; else elseTemplate"
                        >
                          <p-button
                            icon="pi pi-envelope"
                            label="Remarks"
                            styleClass="p-button-rounded p-button-raised p-ml-2"
                            badge="{{ unseen_remark }}"
                            (onClick)="openRemarkModal(audit)"
                          ></p-button>
                        </ng-container>
                        <ng-template #elseTemplate>
                          <p-button
                            icon="pi pi-plus"
                            label="Remark"
                            styleClass="p-button-rounded p-button-raised p-ml-2"
                            (onClick)="openRemarkModal(audit)"
                          ></p-button>
                        </ng-template>
                      </div>
                      <p-tabView [(activeIndex)]="activeIndex1">
                        <p-tabPanel header="Detail">
                          <tr>
                            <td colspan="12">
                              <div class="p-3">
                                <p-table
                                  [value]="audit.compiledBranchAudits"
                                  dataKey="id"
                                >
                                  <ng-template pTemplate="header">
                                    <tr>
                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Case Number
                                          <p-columnFilter
                                            type="text"
                                            field="case_number"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>
                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Region
                                          <p-columnFilter
                                            type="text"
                                            field="region.name"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>

                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Audit Type
                                          <p-columnFilter
                                            type="text"
                                            field="audit_type"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>

                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Finding
                                          <p-columnFilter
                                            type="text"
                                            field="finding"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>
                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Impact
                                          <p-columnFilter
                                            type="text"
                                            field="impact"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>
                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Recommendation
                                          <p-columnFilter
                                            type="text"
                                            field="recommendation"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>

                                      <th style="min-width: 6rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Compiled By
                                          <p-columnFilter
                                            type="text"
                                            field="compiler.first_name"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>

                                      <th style="min-width: 5rem">
                                        <div
                                          class="flex justify-content-center align-items-center"
                                        >
                                          Compiled Date
                                          <p-columnFilter
                                            type="date"
                                            field="compiled_date"
                                            display="menu"
                                          ></p-columnFilter>
                                        </div>
                                      </th>

                                      <th style="width: 8rem">Action</th>
                                    </tr>
                                  </ng-template>
                                  <ng-template
                                    pTemplate="body"
                                    let-compiledBranchAudit
                                  >
                                    <tr>
                                      <td>
                                        {{ compiledBranchAudit.case_number }}
                                      </td>
                                      <td>
                                        {{ compiledBranchAudit.region.name }}
                                      </td>
                                      <td>
                                        {{ compiledBranchAudit.audit_type }}
                                      </td>
                                      <td>
                                        <span
                                          [innerHTML]="
                                            compiledBranchAudit.finding
                                          "
                                        ></span>
                                      </td>
                                      <td>
                                        <span
                                          [innerHTML]="
                                            compiledBranchAudit.impact
                                          "
                                        ></span>
                                      </td>
                                      <td>
                                        <span
                                          [innerHTML]="
                                            compiledBranchAudit.recommendation
                                          "
                                        ></span>
                                      </td>
                                      <td>
                                        {{
                                          compiledBranchAudit.compiler
                                            .first_name
                                        }}
                                        {{
                                          compiledBranchAudit.compiler.last_name
                                        }}
                                      </td>
                                      <td>
                                        {{
                                          compiledBranchAudit.compiled_date
                                            | date : "MM/dd/yyyy"
                                        }}
                                      </td>
                                      <td>
                                        <button
                                          pButton
                                          pRipple
                                          icon="pi pi-search"
                                          label="Detail"
                                          class="p-button-rounded p-button-success p-mr-2"
                                          (click)="
                                            openAuditDetailDialog(
                                              compiledBranchAudit
                                            )
                                          "
                                        ></button>
                                      </td>
                                    </tr>
                                  </ng-template>
                                </p-table>
                              </div>
                            </td>
                          </tr>
                        </p-tabPanel>
                      </p-tabView>
                    </div>
                  </td>
                </tr>
              </ng-template>

              <ng-template pTemplate="summary">
                <div class="p-d-flex p-ai-center p-jc-between">
                  In total there are
                  {{
                    compiledRegionalAudits ? compiledRegionalAudits.length : 0
                  }}
                  findings.
                </div>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<p-dialog
  [(visible)]="auditRemarkDialog"
  [style]="{ width: '800px' }"
  header="Remarks"
  [modal]="true"
  styleClass="p-fluid"
  [maximizable]="true"
>
  <ng-template pTemplate="content">
    <app-remark-regional-branch-audit
      [compiledRegionalAudit]="audit_remark"
    ></app-remark-regional-branch-audit>
  </ng-template>
</p-dialog>

<p-dialog
  [(visible)]="auditDetailDialog"
  header="Audit Details"
  [modal]="true"
  styleClass="p-fluid"
  [maximizable]="true"
>
  <!-- [value]="selectedCompiledBranchAudit.branchFinancialAudits" -->

  <ng-template pTemplate="content">
    <div class="card">
      <div class="card-header">Audit Details</div>
      <div class="p-3" *ngIf="audit_type == 'IncompleteAccount'">
        <p-table
          #IncompleteAccount
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'case_number',
            'branch.name',
            'review_status',
            'approve_status',
            'finding_date',
            'incompleteAccountBranch.approved_by',
            'incompleteAccountBranch.account_opened_date',
            'incompleteAccountBranch.account_number',
            'incompleteAccountBranch.account_type',
            'incompleteAccountBranch.account_opened_amount',
            'incompleteAccountBranch.opened_by'
          ]"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #input
                  (input)="
                    IncompleteAccount.filterGlobal(input.value, 'contains')
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Type
                  <p-columnFilter
                    type="text"
                    field="incompleteAccountBranch.account_type"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Number
                  <p-columnFilter
                    type="text"
                    field="incompleteAccountBranch.account_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Amount Opened
                  <p-columnFilter
                    type="numeric"
                    field="incompleteAccountBranch.account_opened_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Opened By
                  <p-columnFilter
                    type="text"
                    field="incompleteAccountBranch.opened_by"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Approved By
                  <p-columnFilter
                    type="text"
                    field="incompleteAccountBranch.approved_by"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 5rem">
                <div class="flex justify-content-center align-items-center">
                  Account Opened Date
                  <p-columnFilter
                    type="date"
                    field="incompleteAccountBranch.account_opened_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 5rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Discrepancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 5rem">Action</th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                {{ branchFinancialAudit.incompleteAccountBranch.account_type }}
              </td>
              <td>
                {{
                  branchFinancialAudit.incompleteAccountBranch.account_number
                }}
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.incompleteAccountBranch
                      ?.account_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.incompleteAccountBranch
                      .account_opened_amount | number : "1.0-2"
                  }}
                  ETB</span
                >
                <span
                  *ngIf="
                    branchFinancialAudit.incompleteAccountBranch.account_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.incompleteAccountBranch
                      .account_opened_amount | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.incompleteAccountBranch?.fcy }}
                </span>
              </td>
              <td>
                {{ branchFinancialAudit.incompleteAccountBranch.opened_by }}
              </td>
              <td>
                {{ branchFinancialAudit.incompleteAccountBranch.approved_by }}
              </td>
              <td>
                {{
                  branchFinancialAudit.incompleteAccountBranch
                    .account_opened_date | date : "MM/dd/yyyy"
                }}
              </td>
              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3"><span class="text-primary ml-4">Total</span></td>
              <td><span class="text-success">Amount Opened(LCY) = </span>{{ total_amount_withdraw_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Amount Opened(FCY) = </span>{{total_amount_withdraw_fcy | number : "1.0-2" }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'OperationalDiscrepancy'">
        <p-table
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          dataKey="id"
          #OperationalDiscrepancy
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'approve_status',
            'finding_date',
            'operationalDescripancyBranch.account_holder_name',
            'operationalDescripancyBranch.transaction_date',
            'operationalDescripancyBranch.account_number',
            'operationalDescripancyBranch.amount',
            'operationalDescripancyBranch.operationalDescripancyCategory',
            'branch.name'
          ]"
        >
          <ng-template pTemplate="caption">
            <div class="Flex">
              <span class="p-input-icon-left ml-auto">
                <input
                  pInputText
                  class="cofsearch"
                  type="text"
                  #input
                  (input)="
                    OperationalDiscrepancy.filterGlobal(input.value, 'contains')
                  "
                  placeholder="Search Keyword"
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 12rem">
                <div class="flex justify-content-center align-items-center">
                  Account Holder Name
                  <p-columnFilter
                    type="text"
                    field="operationalDescripancyBranch.account_holder_name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Account Number
                  <p-columnFilter
                    type="text"
                    field="operationalDescripancyBranch.account_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Amount
                  <p-columnFilter
                    type="numeric"
                    field="operationalDescripancyBranch.amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 13rem">
                <div class="flex justify-content-center align-items-center">
                  Descripancy Category
                  <p-columnFilter
                    type="text"
                    field="operationalDescripancyBranch.operationalDescripancyCategory"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 12rem">
                <div class="flex justify-content-center align-items-center">
                  Reporting Date
                  <p-columnFilter
                    type="date"
                    field="operationalDescripancyBranch.transaction_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th>Action</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-branchFinancialAudit>
            <tr>
              <td>{{ branchFinancialAudit.case_number }}</td>

              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>
                {{
                  branchFinancialAudit.operationalDescripancyBranch
                    ?.acount_holder_name
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.operationalDescripancyBranch
                    ?.account_number
                }}
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.operationalDescripancyBranch
                      ?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.operationalDescripancyBranch?.amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.operationalDescripancyBranch
                      .cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.operationalDescripancyBranch?.amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.operationalDescripancyBranch?.fcy }}
                </span>
              </td>
              <td>
                {{
                  branchFinancialAudit.operationalDescripancyBranch!
                    .operationalDescripancyCategory?.name
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.operationalDescripancyBranch
                    ?.transaction_date | date : "MM/dd/yyyy"
                }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3"><span class="text-primary ml-4">Total</span></td>
              <td><span class="text-success">Amount(LCY) = </span>{{ total_amount_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Amount(FCY)= </span>{{ total_amount_fcy | number : "1.0-2" }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'AbnormalBalance'">
        <p-table
          #AbnormalBalance
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'case_number',
            'branch.name',
            'review_status',
            'finding_date',
            'abnormalBalanceBranch?.account_affected',
            'abnormalBalanceBranch.fcy',
            'abnormalBalanceBranch.credit'
          ]"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #input
                  (input)="
                    AbnormalBalance.filterGlobal(input.value, 'contains')
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Affected
                  <p-columnFilter
                    type="text"
                    field="abnormalBalanceBranch.account_affected"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Debit
                  <p-columnFilter
                    type="numeric"
                    field="abnormalBalanceBranch.debit"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Credit
                  <p-columnFilter
                    type="numeric"
                    field="abnormalBalanceBranch.credit"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Date of descripancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 5rem">Action</th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                {{
                  branchFinancialAudit.abnormalBalanceBranch?.account_affected
                }}
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.abnormalBalanceBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.abnormalBalanceBranch?.debit
                      | number : "1.0-2"
                  }}
                  ETB
                </span>

                <span
                  *ngIf="
                    branchFinancialAudit.abnormalBalanceBranch?.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.abnormalBalanceBranch?.debit
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.abnormalBalanceBranch?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.abnormalBalanceBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.abnormalBalanceBranch?.credit
                      | number : "1.0-2"
                  }}
                  ETB
                </span>

                <span
                  *ngIf="
                    branchFinancialAudit.abnormalBalanceBranch?.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.abnormalBalanceBranch?.credit
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.abnormalBalanceBranch?.fcy }}
                </span>
              </td>

              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Credit(LCY) = </span
                >{{
                  total_credit_amount | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Credit(FCY) = </span
                >{{
                  total_credit_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Debit(LCY) = </span
                >{{
                  total_debit_amount | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Debit(FCY) = </span
                >{{
                  total_debit_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>

        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'CashCount'">
        <p-table
          #CashCount
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
          [globalFilterFields]="[
            'branch.name',
            'auditor.first_name',
            'cashcount.accountable_staff',
            'cashcount.actual_cash_count',
            'cashcount.trial_balance',
            'cashcount.difference',
            'cashcount.cash_count_type'
          ]"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
        >
          <ng-template pTemplate="caption">
            <div class="Flex">
              <span class="p-input-icon-left ml-auto">
                <input
                  pInputText
                  class="cofsearch"
                  type="text"
                  #input
                  (input)="CashCount.filterGlobal(input.value, 'contains')"
                  placeholder="Search Keyword"
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="auditor.case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Cash Count Type
                  <p-columnFilter
                    type="text"
                    field="cashcount.cash_count_type"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Accountable Staff
                  <p-columnFilter
                    type="text"
                    field="cashcount.accountable_staff"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Actual Cash Count
                  <p-columnFilter
                    type="numeric"
                    field="cashcount.actual_cash_count"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Trial Balance
                  <p-columnFilter
                    type="numeric"
                    field="cashcount.trial_balance"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="numeric"
                    field="cashcount.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 12rem">Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td style="width: 3rem">
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>

              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>

              <td>
                {{ branchFinancialAudit.case_number }}
              </td>

              <td>
                {{ branchFinancialAudit.cashcount.cash_count_type }}
              </td>
              <td>
                {{ branchFinancialAudit.cashcount.accountable_staff }}
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.cashcount?.cash_count_type != 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashcount.actual_cash_count
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.cashcount.cash_count_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashcount.actual_cash_count
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.cashcount?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.cashcount?.cash_count_type != 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashcount.trial_balance
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.cashcount.cash_count_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashcount.trial_balance
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.cashcount?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.cashcount?.cash_count_type != 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashcount.difference | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.cashcount.cash_count_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashcount.difference | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.cashcount?.fcy }}
                </span>
              </td>
              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3"><span class="text-primary ml-4">Total</span></td>
              <td><span class="text-success">Actual(LCY) = </span>{{ total_actual_cash_count_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Actual(FCY) = </span>{{ total_actual_cash_count_fcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Trial(LCY) = </span>{{ total_trial_balance_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Trial (FCY) = </span>{{ total_trial_balance_fcy | number : "1.0-2" }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'ATMCard'">
        <p-table
          #ATMCard
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'branch.name',
            'case_number',
            'finding',
            'impact',
            'recommendation',
            'atmCardBranch.issued_card',
            'atmCardBranch.distributed_card',
            'atmCardBranch.returned_card',
            'atmCardBranch.remaining_card'
          ]"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          [tableStyle]="{ 'min-width': '80rem' }"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #input
                  (input)="ATMCard.filterGlobal(input.value, 'contains')"
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Issued Card
                  <p-columnFilter
                    type="numeric"
                    field="atmCardBranch.issued_card"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Distributed Card
                  <p-columnFilter
                    type="numeric"
                    field="atmCardBranch.distributed_card"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Remaining Card
                  <p-columnFilter
                    type="numeric"
                    field="atmCardBranch.remaining_card"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Returned Card
                  <p-columnFilter
                    type="numeric"
                    field="atmCardBranch.returned_card"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 5rem">Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                {{
                  branchFinancialAudit.atmCardBranch?.issued_card
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.atmCardBranch?.distributed_card
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.atmCardBranch?.remaining_card
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.atmCardBranch?.returned_card
                    | number : "1.0-2"
                }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3"><span class="text-primary ml-4">Total</span></td>
              <td><span class="text-success">Issued Card = </span>{{ total_issued_card | number : "1.0-2" }}</td>
              <td><span class="text-success">Distributed Card = </span>{{ total_distributed_card | number : "1.0-2" }}</td>
              <td><span class="text-success">Remaining Card = </span>{{ total_remaining_card | number : "1.0-2" }}</td>
              <td><span class="text-success">Returned Card = </span>{{ total_retarned_card | number : "1.0-2" }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'CashPerformance'">
        <p-table
          #CashPerformance
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          [globalFilterFields]="[
            'id',
            'case_number',
            'cashPerformanceBranch?.accountable_staff',
            'cashPerformanceBranch.amount_shortage',
            'cashPerformanceBranch.amount_excess',
            'finding_date',
            'branch.name'
          ]"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #searchData
                  (input)="
                    CashPerformance.filterGlobal(searchData.value, 'contains')
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Accountable Staff
                  <p-columnFilter
                    type="text"
                    field="cashPerformanceBranch.accountable_staff"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Amount Shortage
                  <p-columnFilter
                    type="numeric"
                    field="cashPerformanceBranch.amount_shortage"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Amount Excess
                  <p-columnFilter
                    type="numeric"
                    field="cashPerformanceBranch.amount_excess"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="numeric"
                    field="cashPerformanceBranch.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 10rem">
                <div class="flex justify-content-center align-items-center">
                  Action taken
                  <p-columnFilter
                    type="text"
                    field="cashPerformanceBranch.action_taken"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Discrepancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th>Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                {{
                  branchFinancialAudit.cashPerformanceBranch?.accountable_staff
                }}
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.cashPerformanceBranch?.cash_type !=
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashPerformanceBranch.amount_shortage
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.cashPerformanceBranch.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashPerformanceBranch.amount_shortage
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.cashPerformanceBranch?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.cashPerformanceBranch?.cash_type !=
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashPerformanceBranch.amount_excess
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.cashPerformanceBranch.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashPerformanceBranch.amount_excess
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.cashPerformanceBranch?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.cashPerformanceBranch?.cash_type !=
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashPerformanceBranch.difference
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.cashPerformanceBranch.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.cashPerformanceBranch.difference
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.cashPerformanceBranch?.fcy }}
                </span>
              </td>
              <td>
                <span
                  [innerHTML]="
                    branchFinancialAudit.cashPerformanceBranch?.action_taken
                  "
                ></span>
              </td>
              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>
              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Shortage(LCY) = </span
                >{{
                  total_shortage_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Shortage(FCY) = </span
                >{{
                  total_shortage_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Excess(LCY) = </span
                >{{
                  total_excess_amount | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Excess(FCY) = </span
                >{{
                  total_excess_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'CashManagement'">
        <p-table
          #CashManagement
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [rowHover]="true"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'approve_status',
            'finding_date',
            'cashManagementBranch.average_cash_holding',
            'cashManagementBranch.branch_cash_set_limit',
            'cashManagementBranch.difference',
            'cashManagementBranch.cash_type',
            'branch.name'
          ]"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #searchData
                  (input)="
                    CashManagement.filterGlobal(searchData.value, 'contains')
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Average Cash Holding
                  <p-columnFilter
                    type="numeric"
                    field="cashManagementBranch.average_cash_holding
                  "
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Cash Set Limit
                  <p-columnFilter
                    type="numeric"
                    field=" cashManagementBranch.branch_cash_set_limit"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="numeric"
                    field=" cashManagementBranch.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 10rem">
                <div class="flex justify-content-center align-items-center">
                  Currency Type
                  <p-columnFilter
                    type="text"
                    field="cashManagementBranch.cash_type"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Discrepancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th>Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>
                {{
                  branchFinancialAudit.cashManagementBranch
                    ?.average_cash_holding | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.cashManagementBranch
                    ?.branch_cash_set_limit | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.cashManagementBranch?.difference
                    | number : "1.0-2"
                }}
              </td>

              <td>
                {{ branchFinancialAudit.cashManagementBranch?.cash_type }}
              </td>
              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>
              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3"><span class="text-primary ml-4">Total</span></td>
              <td><span class="text-success">Average Cash Holding(LCY) = </span>{{ total_average_cash_holding_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Average Cash Holding(FCY) = </span>{{ total_average_cash_holding_fcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Set Limit(LCY) = </span>{{ total_cash_set_limit_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Set Limit(FCY) = </span>{{ total_cash_set_limit_fcy | number : "1.0-2" }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'SuspenseAccount'">
        <p-table
          #SuspenseAccount
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'approve_status',
            'finding_date',
            'suspenseAccountBranch.balance_per_tracer',
            'suspenseAccountBranch.balance_per_trial_balance',
            'suspenseAccountBranch.difference',
            'suspenseAccountBranch.fcy',
            'suspenseAccountBranch.tracer_date',
            'suspenseAccountBranch.suspenseAccountType.name'
          ]"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="
                    SuspenseAccount.filterGlobal(searchData.value, 'contains')
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Balance Per Tracer
                  <p-columnFilter
                    type="numeric"
                    field="suspenseAccountBranch.balance_per_tracer"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Balance Per Trial Balance
                  <p-columnFilter
                    type="numeric"
                    field="suspenseAccountBranch.balance_per_trial_balance"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="numeric"
                    field="suspenseAccountBranch.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Suspense Account Type
                  <p-columnFilter
                    type="text"
                    field="suspenseAccountBranch.suspenseAccountType.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Tracer Date
                  <p-columnFilter
                    type="date"
                    field="suspenseAccountBranch.tracer_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 5rem">Action</th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.suspenseAccountBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.suspenseAccountBranch
                      ?.balance_per_tracer | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.suspenseAccountBranch.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.suspenseAccountBranch
                      ?.balance_per_tracer | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.suspenseAccountBranch?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.suspenseAccountBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.suspenseAccountBranch
                      ?.balance_per_trial_balance | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.suspenseAccountBranch.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.suspenseAccountBranch
                      ?.balance_per_trial_balance | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.suspenseAccountBranch?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.suspenseAccountBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.suspenseAccountBranch?.difference
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.suspenseAccountBranch.cash_type ==
                    'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.suspenseAccountBranch?.difference
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.suspenseAccountBranch?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngFor="
                    let suspense_account_type of branchFinancialAudit.suspenseAccountBranch!
                      .suspenseAccountType;
                    let isLast = last
                  "
                >
                  {{ suspense_account_type.name
                  }}<ng-container *ngIf="!isLast">, </ng-container>
                </span>
              </td>

              <td>
                {{
                  branchFinancialAudit.suspenseAccountBranch?.tracer_date
                    | date : "MM/dd/yyyy"
                }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Balance per Tracer(LCY) = </span
                >{{
                  total_balance_per_tracer
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Balance Per Tracer(FCY) = </span
                >{{
                  total_balance_per_tracer_fcy
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Balance per Trial Balance(LCY) = </span
                >{{
                  total_balance_per_trial_balance
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Balance per Trial Balance(FCY) = </span
                >{{
                  total_balance_per_trial_balance_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'Dormant'">
        <p-table
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          dataKey="id"
          #Dormant
          [rows]="10"
          [paginator]="true"
          [rowHover]="true"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'branch.name',
            'finding_date',
            'dormantInactive.acount_name',
            'dormantInactive.account_number',
            'dormantInactive.account_type',
            'dormantInactive.approved_by',
            'dormantInactive.amount',
            'dormantInactive.entry_passed_by',
            'dormantInactive.deactivated_date'
          ]"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #searchData
                  (input)="Dormant.filterGlobal(searchData.value, 'contains')"
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Number
                  <p-columnFilter
                    type="text"
                    field="dormantInactive.account_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Type
                  <p-columnFilter
                    type="text"
                    field="dormantInactive.account_type"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Customer Name
                  <p-columnFilter
                    type="text"
                    field="dormantInactive.account_name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Amount Withdraw
                  <p-columnFilter
                    type="numeric"
                    field="dormantInactive.amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Passed By
                  <p-columnFilter
                    type="text"
                    field="dormantInactive.entry_passed_by"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Approved By
                  <p-columnFilter
                    type="text"
                    field="dormantInactive.approved_by"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Activation
                  <p-columnFilter
                    type="date"
                    field="dormantInactive.deactivated_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Discrepancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th>Action</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-branchFinancialAudit>
            <tr>
              <td>{{ branchFinancialAudit.case_number }}</td>

              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.dormantInactive.account_number }}</td>
              <td>{{ branchFinancialAudit.dormantInactive.account_type }}</td>
              <td>{{ branchFinancialAudit.dormantInactive.acount_name }}</td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.dormantInactive?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.dormantInactive.amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.dormantInactive.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.dormantInactive.amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.dormantInactive?.fcy }}
                </span>
              </td>

              <td>
                {{ branchFinancialAudit.dormantInactive.entry_passed_by }}
              </td>
              <td>
                {{ branchFinancialAudit.dormantInactive.entry_approved_by }}
              </td>
              <td>
                {{
                  branchFinancialAudit.dormantInactive.deactivated_date
                    | date : "MM/dd/yyyy"
                }}
              </td>
              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3"><span class="text-primary ml-4">Total</span></td>
              <td><span class="text-success">Amount WithDraw(LCY) = </span>{{ total_amount_withdraw_dormant_lcy | number : "1.0-2" }}</td>
              <td><span class="text-success">Amount WithDraw(FCY) = </span>{{ total_amount_withdraw_dormant_fcy | number : "1.0-2" }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'ControllableExpense'">
        <p-table
          #ControllableExpense
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          [loading]="loading"
          [globalFilterFields]="[
            'id',
            'case_number',
            'controllableExpense.actual_balance',
            'controllableExpense.budget_per_plan',
            'finding_date',
            'controllableExpense.variation',
            'controllableExpense.controllable_expense_type.name',
            'controllableExpense.period',
            'branch.name'
          ]"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="
                    ControllableExpense.filterGlobal(
                      searchData.value,
                      'contains'
                    )
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Budget Per Plan
                  <p-columnFilter
                    type="numeric"
                    field="controllableExpense.balance_per_tracer"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Actual Balance
                  <p-columnFilter
                    type="numeric"
                    field="controllableExpense.balance_per_trial_balance"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Variation
                  <p-columnFilter
                    type="numeric"
                    field="controllableExpense.varation"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Expense Type
                  <p-columnFilter
                    type="text"
                    field="controllableExpense.controllable_expense_type.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Date
                  <p-columnFilter
                    type="date"
                    field="controllableExpense.period"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="width: 12rem">Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>

              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>

              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.controllableExpense?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.controllableExpense?.budget_per_plan
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.controllableExpense.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.controllableExpense?.budget_per_plan
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.controllableExpense?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.controllableExpense?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.controllableExpense?.actual_balance
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.controllableExpense.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.controllableExpense?.actual_balance
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.controllableExpense?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.controllableExpense?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.controllableExpense?.variation
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.controllableExpense.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.controllableExpense?.variation
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.controllableExpense?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngFor="
                    let controllable_expense_type of branchFinancialAudit.controllableExpense!
                      .controllableExpenseType;
                    let isLast = last
                  "
                >
                  {{ controllable_expense_type.name
                  }}<ng-container *ngIf="!isLast">, </ng-container>
                </span>
              </td>

              <td>
                {{
                  branchFinancialAudit.controllableExpense?.period
                    | date : "MM/dd/yyyy"
                }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Budget per Plan(LCY) = </span
                >{{
                  budget_per_plan | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Budget per Plan(FCY) = </span
                >{{
                  budget_per_plan_fcy | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Actual Balance(LCY) = </span
                >{{ actual_balance | number : "1.0-2" }}
              </td>
              <td>
                <span class="text-success">
                  Actual Balance (FCY) = </span
                >{{
                  actual_balance_fcy | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'Contigent'">
        <p-table
          #Contigent
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'approve_status',
            'finding_date',
            'memorandumContigent.fcy',
            'memorandumContigent.contingent_amount',
            'memorandumContigent.contingent_amount',
            'memorandumContigent.difference',
            'memorandumContigent.cash_type'
          ]"
          [(selection)]="selectedAudits"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="Contigent.filterGlobal(searchData.value, 'contains')"
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Memorandom Amount
                  <p-columnFilter
                    type="numeric"
                    field="memorandumContigent.memorandom_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Contigent Amount
                  <p-columnFilter
                    type="numeric"
                    field="memorandumContigent.contingent_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Difference mount
                  <p-columnFilter
                    type="numeric"
                    field="memorandumContigent.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 5rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Discrepancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="width: 12rem">Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.memorandumContigent?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.memorandumContigent.memorandom_amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.memorandumContigent.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.memorandumContigent.memorandom_amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.memorandumContigent?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.memorandumContigent?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.memorandumContigent.contingent_amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.memorandumContigent.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.memorandumContigent.contingent_amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.memorandumContigent?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.memorandumContigent?.cash_type == 'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.memorandumContigent.difference
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.memorandumContigent.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.memorandumContigent.difference
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.memorandumContigent?.fcy }}
                </span>
              </td>

              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Contigent Amount(LCY) = </span
                >{{
                  total_asset_amount | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Contigent Amount(FCY) = </span
                >{{
                  total_asset_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Memorandom Amount(LCY) = </span
                >{{
                  total_liability_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Memorandom Amount(FCY) = </span
                >{{
                  total_liability_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>

        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'NegotiableInstrument'">
        <p-table
          #NegotiableInstrument
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          [globalFilterFields]="[
            'case_number',
            'negotiableInstrument.account_holder',
            'negotiableInstrument.account_number',
            'negotiableInstrument.printed_date',
            'negotiableInstrument.amount',
            'negotiableInstrument.difference',
            'negotiableInstrument.negotiableStockItem.stock_type',
            'negotiableInstrument.ck_type',
            'negotiableInstrument.ck_range',
            'negotiableInstrument.quantity',
            'negotiableInstrument.unit_price',
            'negotiableInstrument.trial_balance',
            'negotiableInstrument.action_taken',
            'negotiableInstrument.cash_type',
            'negotiableInstrument.fcy',
            'branch.name'
          ]"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="
                    NegotiableInstrument.filterGlobal(
                      searchData.value,
                      'contains'
                    )
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Holder
                  <p-columnFilter
                    type="text"
                    field="negotiableInstrument.account_holder"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Account Number
                  <p-columnFilter
                    type="text"
                    field="negotiableInstrument.account_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Stock Type(Leave)
                  <p-columnFilter
                    type="text"
                    field="negotiableInstrument.ck_type"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Negotiable Item Type
                  <p-columnFilter
                    type="text"
                    field="negotiableInstrument.negotiableStockItem.stock_type"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Amount
                  <p-columnFilter
                    type="numeric"
                    field="negotiableInstrument.amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Stock Number
                  <p-columnFilter
                    type="numeric"
                    field="negotiableInstrument.ck_range"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Quantity
                  <p-columnFilter
                    type="numeric"
                    field="negotiableInstrument.quantity"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Unit Price
                  <p-columnFilter
                    type="numeric"
                    field="negotiableInstrument.unit_price"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="numeric"
                    field="negotiableInstrument.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Trial Balance
                  <p-columnFilter
                    type="numeric"
                    field="negotiableInstrument.trial_balance"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 3rem">
                <div class="flex justify-content-center align-items-center">
                  Counted Date
                  <p-columnFilter
                    type="date"
                    field="negotiableInstrument.printed_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th>Action</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-branchFinancialAudit>
            <tr>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>
                {{ branchFinancialAudit.negotiableInstrument?.account_holder }}
              </td>
              <td>
                {{ branchFinancialAudit.negotiableInstrument?.account_number }}
              </td>
              <td>
                {{ branchFinancialAudit.negotiableInstrument?.ck_type }}
              </td>
              <td>
                {{
                  branchFinancialAudit.negotiableInstrument!.negotiableStockItem
                    ?.stock_type
                }}
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.negotiableInstrument?.fcy }}
                </span>
              </td>
              <td>
                {{ branchFinancialAudit.negotiableInstrument?.ck_range }}
              </td>
              <td>
                {{
                  branchFinancialAudit.negotiableInstrument?.quantity
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.unit_price
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.unit_price
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.negotiableInstrument?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.difference
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.difference
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.negotiableInstrument?.fcy }}
                </span>
              </td>

              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.trial_balance
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.negotiableInstrument.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.negotiableInstrument?.trial_balance
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.negotiableInstrument?.fcy }}
                </span>
              </td>
              <td>
                {{
                  branchFinancialAudit.negotiableInstrument?.printed_date
                    | date : "MM/dd/yyyy"
                }}
              </td>
              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Amount(LCY) = </span
                >{{ total_amount | number : "1.0-2" }}
              </td>
              <td>
                <span class="text-success"
                  >Amount(FCY) = </span
                >{{
                  total_amount_fcy | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Trial Balance(LCY) = </span
                >{{
                  total_trail_balance_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Trial Balance(FCY) = </span
                >{{
                  total_trial_balance_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'LongOutstandingItems'">
        <p-table
          #LongOutstandingItems
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'auditor.first_name',
            'branch.name',
            'long_outstanding.outstanding_item',
            'long_outstanding.less_than_90_amount',
            'long_outstanding.less_than_90_number',
            'long_outstanding.greater_than_90_amount',
            'long_outstanding.greater_than_90_number',
            'long_outstanding.greater_than_180_amount',
            'long_outstanding.greater_than_180_number',
            'long_outstanding.greater_than_365_amount',
            'long_outstanding.greater_than_365_number',
            'long_outstanding.trial_balance',
            'long_outstanding.total_amount',
            'long_outstanding.difference',
            'long_outstanding.justification'
          ]"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="
                    LongOutstandingItems.filterGlobal(
                      searchData.value,
                      'contains'
                    )
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>

          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="auditor.case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Item
                  <p-columnFilter
                    type="text"
                    field="long_outstanding.outstanding_item"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Currency Type
                  <p-columnFilter
                    type="text"
                    field="fcy"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  < 90 Amount
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.less_than_90_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  < 90 #
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.less_than_90_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Between 90-180 Amount
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.greater_than_90_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Between 90-180 #
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.greater_than_90_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Between 180-365 Amount
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.greater_than_180_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Between 180-365 #
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.greater_than_180_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  > 365 Amount
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.greater_than_365_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  > 365 #
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.greater_than_365_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Trial Balance
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.trial_balance"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Total Amount
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.total_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="number"
                    field="long_outstanding.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 5rem">Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>

              <td>
                {{ branchFinancialAudit.case_number }}
              </td>
              <td>
                {{ branchFinancialAudit.long_outstanding.outstanding_item }}
              </td>
              <td>
                <span *ngIf="branchFinancialAudit.long_outstanding.fcy">
                  {{ branchFinancialAudit.long_outstanding.fcy }}
                </span>

                <span *ngIf="!branchFinancialAudit.long_outstanding.fcy">
                  ETB
                </span>
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.less_than_90_amount
                    | number : "1.0-2"
                }}
              </td>

              <td>
                {{
                  branchFinancialAudit.long_outstanding.less_than_90_number
                    | number : "1.0-2"
                }}
              </td>

              <td>
                {{
                  branchFinancialAudit.long_outstanding.greater_than_90_amount
                    | number : "1.0-2"
                }}
              </td>

              <td>
                {{
                  branchFinancialAudit.long_outstanding.greater_than_90_number
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.greater_than_180_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.greater_than_180_number
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.greater_than_365_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.greater_than_365_number
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.trial_balance
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.total_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                {{
                  branchFinancialAudit.long_outstanding.difference
                    | number : "1.0-2"
                }}
              </td>

              <td style="width: 18rem">
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>


          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Trial Blance(LCY) = </span
                >{{ trial_balance_l | number : "1.0-2" }}
              </td>
              <td>
                <span class="text-success"
                  >Trial Balance(FCY) = </span
                >{{
                  trial_balance_l_fcy | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Amount(LCY) = </span
                >{{
                  total_amount_L
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  > Amount(FCY) = </span
                >{{
                  total_amount_L_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'GeneralObservation'">
        <p-table
          #GeneralObservation
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'approve_status',
            'observation_date',
            'impact',
            'observation',
            'recommendation',
            'branch.name'
          ]"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="
                    GeneralObservation.filterGlobal(
                      searchData.value,
                      'contains'
                    )
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Observation
                  <p-columnFilter
                    type="text"
                    field="observation"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 10rem">
                <div class="flex justify-content-center align-items-center">
                  Impact
                  <p-columnFilter
                    type="text"
                    field="impact"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 10rem">
                <div class="flex justify-content-center align-items-center">
                  Recommendation
                  <p-columnFilter
                    type="text"
                    field="recommendation"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 10rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Descripancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 8rem">Action</th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>

              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                <span [innerHTML]="branchFinancialAudit.observation"></span>
              </td>

              <td>
                <span [innerHTML]="branchFinancialAudit.impact"></span>
              </td>

              <td>
                <span [innerHTML]="branchFinancialAudit.recommendation"></span>
              </td>

              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="summary">
            <div class="p-d-flex p-ai-center p-jc-between">
              In total there are
              {{
                selectedCompiledBranchAudit.branchFinancialAudits
                  ? selectedCompiledBranchAudit.branchFinancialAudits.length
                  : 0
              }}
              findings.
            </div>
          </ng-template>
        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'AssetLiability'">
        <p-table
          #AssetLiability
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'approve_status',
            'branch.name',
            'finding_date',
            'assetLiabilityBranch.cash_type',
            'assetLiabilityBranch.asset_amount',
            'assetLiabilityBranch.liability_amount',
            'assetLiabilityBranch.difference'
          ]"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  #input
                  (input)="AssetLiability.filterGlobal(input.value, 'contains')"
                  placeholder="Search..."
                />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>

              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Case Number
                  <p-columnFilter
                    type="text"
                    field="case_number"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Asset Amount
                  <p-columnFilter
                    type="numeric"
                    field="assetLiabilityBranch.asset_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Liability Amount
                  <p-columnFilter
                    type="numeric"
                    field="assetLiabilityBranch.liability_amount"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="min-width: 6rem">
                <div class="flex justify-content-center align-items-center">
                  Difference
                  <p-columnFilter
                    type="numeric"
                    field="assetLiabilityBranch.difference"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 10rem">
                <div class="flex justify-content-center align-items-center">
                  Date of Descripancy
                  <p-columnFilter
                    type="date"
                    field="finding_date"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>

              <th style="width: 5rem">Action</th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td>{{ branchFinancialAudit.case_number }}</td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.assetLiabilityBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.assetLiabilityBranch?.asset_amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>

                <span
                  *ngIf="
                    branchFinancialAudit.assetLiabilityBranch.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.assetLiabilityBranch?.asset_amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.assetLiabilityBranch?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.assetLiabilityBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.assetLiabilityBranch?.liability_amount
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.assetLiabilityBranch.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.assetLiabilityBranch?.liability_amount
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.assetLiabilityBranch?.fcy }}
                </span>
              </td>
              <td>
                <span
                  *ngIf="
                    branchFinancialAudit.assetLiabilityBranch?.cash_type ==
                    'LCY'
                  "
                >
                  {{
                    branchFinancialAudit.assetLiabilityBranch?.difference
                      | number : "1.0-2"
                  }}
                  ETB
                </span>
                <span
                  *ngIf="
                    branchFinancialAudit.assetLiabilityBranch.cash_type == 'FCY'
                  "
                >
                  {{
                    branchFinancialAudit.assetLiabilityBranch?.difference
                      | number : "1.0-2"
                  }}
                  {{ branchFinancialAudit.assetLiabilityBranch?.fcy }}
                </span>
              </td>

              <td>
                {{ branchFinancialAudit.finding_date | date : "MM/dd/yyyy" }}
              </td>

              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Asset Amount(LCY) = </span
                >{{
                  total_asset_amount | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Asset Amount(FCY) = </span
                >{{
                  total_asset_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Liability Amount(LCY) = </span
                >{{
                  total_liability_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Liability Amount(FCY) = </span
                >{{
                  total_liability_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>

        </p-table>
      </div>

      <div class="p-3" *ngIf="audit_type == 'LoanandAdvance'">
        <p-table
          #LoanandAdvance
          [columns]="selectedColumns"
          [value]="selectedCompiledBranchAudit.branchFinancialAudits"
          [rows]="10"
          [paginator]="true"
          [loading]="loading"
          [globalFilterFields]="[
            'case_number',
            'review_status',
            'loanAndAdvance.borrower_name',
            'loanAndAdvance.account_number',
            'loanAndAdvance.category',
            'loanAndAdvance.loan_type',
            'loanAndAdvance.amount_granted',
            'loanAndAdvance.interest_rate',
            'loanAndAdvance.arrears',
            'loanAndAdvance.loan_disbursed_date',
            'loanAndAdvance.overDraft.approved_amount',
            'loanAndAdvance.overDraft.overdrawn_balance',
            'loanAndAdvance.overDraft.difference',
            'loanAndAdvance.overDraft.penalty_charge',
            'loanAndAdvance.due_date',
            'loanAndAdvance.overDraft.expiry_date',
            'branch.name'
          ]"
          [rowHover]="true"
          dataKey="id"
          [rowsPerPageOptions]="[5, 10, 25, 50]"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="caption">
            <div class="text-right">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  #searchData
                  type="text"
                  (input)="
                    LoanandAdvance.filterGlobal(searchData.value, 'contains')
                  "
                  placeholder="Search..."
                />
              </span>
            </div>
            <div class="text-left">
              <p-multiSelect
                [options]="cols"
                [(ngModel)]="selectedColumns"
                optionLabel="header"
                selectedItemsLabel="{0} columns selected"
                [style]="{ 'min-width': '200px' }"
                placeholder="Choose Columns"
              ></p-multiSelect>
            </div>
          </ng-template>
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width: 8rem">
                <div class="flex justify-content-center align-items-center">
                  Branch
                  <p-columnFilter
                    type="text"
                    field="branch.name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th *ngFor="let col of columns">
                <div class="flex justify-content-center align-items-center">
                  {{ col.header }}
                  <p-columnFilter
                    type="text"
                    [field]="col.field"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="width: 6rem">Action</th>
            </tr>
          </ng-template>

          <ng-template
            pTemplate="body"
            let-branchFinancialAudit
            let-columns="columns"
            let-expanded="expanded"
          >
            <tr>
              <td>
                <p-tableCheckbox
                  [value]="branchFinancialAudit"
                ></p-tableCheckbox>
              </td>
              <td>
                {{ branchFinancialAudit?.branch.name }}
              </td>
              <td *ngFor="let col of columns">
                <div
                  *ngIf="col.field.includes('case_number'); else loanAdvance"
                >
                  {{ branchFinancialAudit[col.field] }}
                </div>
                <ng-template #loanAdvance>
                  <div
                    *ngIf="
                      col.field.includes('account_number') ||
                        col.field.includes('loan_type') ||
                        col.field.includes('loan_status') ||
                        col.field.includes('amount_granted') ||
                        col.field.includes('interest_rate') ||
                        col.field.includes('arrears') ||
                        col.field.includes('account_number') ||
                        col.field.includes('borrower_name') ||
                        col.field.includes('loan_disbursed_date');
                      else overDraft
                    "
                  >
                    <div *ngIf="col.field.includes('amount_granted')">
                      <span
                        *ngIf="
                          branchFinancialAudit.loanAndAdvance?.cash_type ==
                          'LCY'
                        "
                      >
                        {{
                          branchFinancialAudit.loanAndAdvance[col.field]
                            | number : "1.0-2"
                        }}
                        ETB
                      </span>
                      <span
                        *ngIf="
                          branchFinancialAudit.loanAndAdvance.cash_type == 'FCY'
                        "
                      >
                        {{
                          branchFinancialAudit.loanAndAdvance[col.field]
                            | number : "1.0-2"
                        }}
                        {{ branchFinancialAudit.loanAndAdvance?.fcy }}
                      </span>
                    </div>
                    <div *ngIf="col.field.includes('loan_disbursed_date')">
                      {{
                        branchFinancialAudit.loanAndAdvance[col.field]
                          | date : "MM/dd/yyyy"
                      }}
                    </div>
                    <div
                      *ngIf="
                        !col.field.includes('amount_granted') &&
                        !col.field.includes('loan_disbursed_date')
                      "
                    >
                      {{ branchFinancialAudit.loanAndAdvance[col.field] }}
                    </div>
                  </div>

                  <ng-template #overDraft>
                    <div
                      *ngIf="
                        col.field.includes('approved_amount') ||
                        col.field.includes('overdrawn_balance') ||
                        col.field.includes('difference') ||
                        col.field.includes('penalty_charge')
                      "
                    >
                      <span
                        *ngIf="
                          branchFinancialAudit.loanAndAdvance?.cash_type ==
                          'LCY'
                        "
                      >
                        {{
                          branchFinancialAudit.loanAndAdvance?.overDraft[
                            col.field
                          ] | number : "1.0-2"
                        }}
                        ETB
                      </span>
                      <span
                        *ngIf="
                          branchFinancialAudit.loanAndAdvance.cash_type == 'FCY'
                        "
                      >
                        {{
                          branchFinancialAudit.loanAndAdvance?.overDraft[
                            col.field
                          ] | number : "1.0-2"
                        }}
                        {{ branchFinancialAudit.loanAndAdvance?.fcy }}
                      </span>
                    </div>
                    <div *ngIf="col.field.includes('expiry_date')">
                      {{
                        branchFinancialAudit.loanAndAdvance.overDraft[col.field]
                          | date : "MM/dd/yyyy"
                      }}
                    </div>
                  </ng-template>
                </ng-template>
              </td>
              <td>
                <button
                  pButton
                  pRipple
                  label="Files"
                  icon="pi pi-file"
                  class="p-button-raised p-button-rounded p-mr-2"
                  (click)="getFileUrls(branchFinancialAudit)"
                  [disabled]="
                    !branchFinancialAudit.file_urls ||
                    !branchFinancialAudit.file_urls.length
                  "
                ></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [colSpan]="3">
                <span class="text-primary ml-4"
                  >Total</span
                >
              </td>
              <td>
                <span class="text-success"
                  >Approved Amount(LCY) = </span
                >{{
                  total_approved_amount
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Approved Amount(FCY) = </span
                >{{
                  total_approved_amount_fcy
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success">
                  Outstanding Balance(LCY) = </span
                >{{
                  total_overdrawn_balance
                    | number : "1.0-2"
                }}
              </td>
              <td>
                <span class="text-success"
                  >Outstanding Balance(FCY) = </span
                >{{
                  total_overdrawn_balance_fcy
                    | number : "1.0-2"
                }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      label="Cancel"
      icon="pi pi-times"
      class="p-button-text"
      (click)="hideDialog()"
    ></button>
  </ng-template>
</p-dialog>

<p-dialog
  [(visible)]="filesDialog"
  [style]="{ width: '800px', height: '80%' }"
  header="Attached Files"
  [modal]="true"
  styleClass="p-fluid"
  [maximizable]="true"
>
  <ng-template pTemplate="content">
    <div class="card">
      <div class="card-header">Attached Files</div>
      <ul class="list-group list-group-flush">
        <li *ngFor="let file of fileInfos | async" class="list-group-item">
          <a href="{{ file.url }}">{{ file.name }}</a>
        </li>
      </ul>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      label="Cancel"
      icon="pi pi-times"
      class="p-button-text"
      (click)="hideDialog()"
    ></button>
  </ng-template>
</p-dialog>

<p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>
